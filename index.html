<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sales Trainee Evaluation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background:#f3f6fa;
      margin:0;
      padding:20px;
    }
    .container {
      max-width:1100px;
      margin:auto;
      background:white;
      padding:30px;
      border-radius:14px;
      box-shadow:0 8px 30px rgba(0,0,0,0.08);
    }
    h1 {
      text-align:center;
      margin-top:0;
    }
    h2 {
      margin-top:30px;
      margin-bottom:10px;
    }
    .grid-3 {
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:16px;
    }
    @media (max-width:900px) {
      .grid-3 { grid-template-columns:1fr; }
    }
    label.field-label {
      font-weight:600;
      margin-bottom:4px;
      display:block;
      color:#0f172a;
    }
    select, input, textarea {
      width:100%;
      padding:10px;
      border:1px solid #d0d7e2;
      border-radius:8px;
      font-size:14px;
      box-sizing:border-box;
    }
    textarea {
      min-height:80px;
      resize:vertical;
    }
    .readonly-box {
      background:#f1f5f9;
      padding:10px;
      border-radius:8px;
      min-height:42px;
      border:1px solid #d0d7e2;
    }
    .form-item {
      margin-bottom:4px;
    }
    .radio-row label {
      font-weight:400;
    }
    button {
      padding:12px 22px;
      font-size:15px;
      font-weight:600;
      border:0;
      border-radius:8px;
      cursor:pointer;
    }
    .btn-primary {
      background:#0ea5a4;
      color:white;
      margin-right:10px;
    }
    .btn-secondary {
      background:#e2e8f0;
    }
    table {
      width:100%;
      border-collapse:collapse;
      margin-top:20px;
    }
    th, td {
      border:1px solid #e2e8f0;
      padding:8px;
      font-size:13px;
    }
    th {
      background:#f8fafc;
    }
  </style>
</head>
<body>
<div class="container">

  <h1>Sales Trainee Evaluation</h1>
  <p style="text-align:center;color:#475569">
    Select a trainee to auto-fill their details, complete the evaluation, and download a CSV.
  </p>

  <h2>1. Trainee &amp; Evaluator Details</h2>
  <div class="grid-3">
    <div>
      <label class="field-label">Trainee Name *</label>
      <select id="traineeSelect">
        <option value="">Select trainee</option>
      </select>
    </div>

    <div>
      <label class="field-label">Employee ID</label>
      <div id="empid" class="readonly-box">—</div>
    </div>

    <div>
      <label class="field-label">Branch</label>
      <div id="branch" class="readonly-box">—</div>
    </div>

    <div>
      <label class="field-label">Mentor</label>
      <div id="mentor" class="readonly-box">—</div>
    </div>

    <div>
      <label class="field-label">Buddy</label>
      <div id="buddy" class="readonly-box">—</div>
    </div>

    <div>
      <label class="field-label">Evaluator Name *</label>
      <input id="evaluator" placeholder="Enter your name" />
    </div>
  </div>

  <h2>2. Evaluation Parameters</h2>
  <div class="grid-3">

    <!-- 1. Average meetings per day -->
    <div class="form-item">
      <label class="field-label">How many average meeting was the trainee able to do every day?</label>
      <input type="number" name="avg_meetings_per_day" class="input" />
    </div>

    <!-- 2. Met meetings target? -->
    <div class="form-item">
      <label class="field-label">Did the trainee meet the meetings target?</label>
      <div class="radio-row">
        <label><input type="radio" name="met_meetings_target" value="Yes" /> Yes</label>
        <label style="margin-left:12px"><input type="radio" name="met_meetings_target" value="No" /> No</label>
      </div>
    </div>

    <!-- 3. Identify sales opportunity? -->
    <div class="form-item">
      <label class="field-label">Was the trainee able to identify sales opportunity during meetings?</label>
      <div class="radio-row">
        <label><input type="radio" name="identified_sales_opportunity" value="Yes" /> Yes</label>
        <label style="margin-left:12px"><input type="radio" name="identified_sales_opportunity" value="No" /> No</label>
      </div>
    </div>

    <!-- 4. Convert opportunity into sales? -->
    <div class="form-item">
      <label class="field-label">Was the trainee able to convert the opportunity into actual sales?</label>
      <div class="radio-row">
        <label><input type="radio" name="converted_opportunity_to_sales" value="Yes" /> Yes</label>
        <label style="margin-left:12px"><input type="radio" name="converted_opportunity_to_sales" value="No" /> No</label>
      </div>
    </div>

    <!-- 5. Aligned for long-term sales? -->
    <div class="form-item">
      <label class="field-label">Is the trainee aligned to do sales in the long run?</label>
      <div class="radio-row">
        <label><input type="radio" name="aligned_for_long_term_sales" value="Yes" /> Yes</label>
        <label style="margin-left:12px"><input type="radio" name="aligned_for_long_term_sales" value="No" /> No</label>
      </div>
    </div>

    <!-- Final Recommendation -->
    <div class="form-item">
      <label class="field-label">Final Recommendation: (Please select one)</label>
      <select name="final_recommendation" class="input">
        <option value="">Select</option>
        <option>Ready for Sales Role</option>
        <option>Ready with some support</option>
        <option>Needs further training</option>
        <option>Not recommended at this stage</option>
      </select>
    </div>

  </div>

  <br />
  <button class="btn-primary" type="button" onclick="saveEval()">Save Evaluation</button>
  <button class="btn-secondary" type="button" onclick="downloadAll()">Download All</button>

  <div id="resultTable"></div>

</div>

<script>
  // Hardcoded trainee data from your CSV
  const trainees = [
    {
      "Employee Name": "Dharmender",
      "Emp ID": 8899,
      "Email ID": "dharmender.k@99acres.com",
      "Location": "Noida",
      "Branch": "Noida A-88",
      "Mentor": "Nitin Kumar",
      "Buddy": "Shashank Verma"
    },
    {
      "Employee Name": "M Sanjiv Gandhi",
      "Emp ID": 9767,
      "Email ID": "m.gandhi@99acres.com",
      "Location": "Chennai",
      "Branch": "Chennai West",
      "Mentor": "Jeevan Prakash",
      "Buddy": "Parthasarthi"
    },
    {
      "Employee Name": "Sarath Babu Kamala Kannan",
      "Emp ID": 16698,
      "Email ID": "",
      "Location": "",
      "Branch": "Chennai South",
      "Mentor": "Swaminathan",
      "Buddy": "Vinoth Kumar"
    },
    {
      "Employee Name": "Chiranth Bangalore Venkatesh",
      "Emp ID": 18708,
      "Email ID": "chiranth.bv@99acres.com",
      "Location": "Bangalore",
      "Branch": "Bangalore Koramangala",
      "Mentor": "Ragini",
      "Buddy": "Pratheek Kumar"
    },
    {
      "Employee Name": "Indrajit Kalita",
      "Emp ID": 18656,
      "Email ID": "indrajit.kalita@99acres.com",
      "Location": "Guwahati",
      "Branch": "Guwahati",
      "Mentor": "Pranjal Saikia",
      "Buddy": "Rohan Sarma"
    },
    {
      "Employee Name": "Naveen Kumar V",
      "Emp ID": 18780,
      "Email ID": "naveen.v@99acres.com",
      "Location": "Hyderabad",
      "Branch": "Hyderabad",
      "Mentor": "Naveen Nayak",
      "Buddy": "Shivaji"
    },
    {
      "Employee Name": "Pushpendra Singh",
      "Emp ID": 18710,
      "Email ID": "pushpendra.singh2@99acres.com",
      "Location": "Noida",
      "Branch": "Gurgaon Udyog Vihar",
      "Mentor": "Karan Kumar",
      "Buddy": "Sarthak"
    },
    {
      "Employee Name": "Shanmathy R",
      "Emp ID": 18716,
      "Email ID": "shanmathy.r@99acres.com",
      "Location": "Chennai",
      "Branch": "Chennai North",
      "Mentor": "Arun",
      "Buddy": "Aravind"
    },
    {
      "Employee Name": "Shubham Singh",
      "Emp ID": 18711,
      "Email ID": "shubham.singh7@99acres.com",
      "Location": "Lucknow",
      "Branch": "Lucknow",
      "Mentor": "Rohit Singh",
      "Buddy": "Prabhat"
    },
    {
      "Employee Name": "Mukul Singh",
      "Emp ID": 18709,
      "Email ID": "mukul.singh@99acres.com",
      "Location": "Noida",
      "Branch": "Gurgaon Sector 44",
      "Mentor": "Vineet",
      "Buddy": "Akshay"
    },
    {
      "Employee Name": "Sourav Kumar",
      "Emp ID": 18714,
      "Email ID": "sourav.kumar@99acres.com",
      "Location": "Patna",
      "Branch": "Patna",
      "Mentor": "Vikash",
      "Buddy": "Gaurav"
    },
    {
      "Employee Name": "Ranjeet Kumar",
      "Emp ID": 18712,
      "Email ID": "ranjeet.kumar@99acres.com",
      "Location": "Ranchi",
      "Branch": "Ranchi",
      "Mentor": "Ishan Tiwari",
      "Buddy": "Vishveshwar Singh"
    },
    {
      "Employee Name": "Rakesh Kumar",
      "Emp ID": 8949,
      "Email ID": "rakesh.kumar@99acres.com",
      "Location": "New Delhi",
      "Branch": "Noida A-88",
      "Mentor": "Nitin Kumar",
      "Buddy": "Shashank Verma"
    },
    {
      "Employee Name": "Shekhar",
      "Emp ID": 18641,
      "Email ID": "shekhar@99Acres.com",
      "Location": "Noida",
      "Branch": "Ghaziabad Office",
      "Mentor": "Manish Sharma",
      "Buddy": "Aditya Gupta"
    }
  ];

  const traineeSelect = document.getElementById("traineeSelect");

  // Populate dropdown
  trainees.forEach(t => {
    const opt = document.createElement("option");
    opt.value = t["Employee Name"];
    opt.textContent = t["Employee Name"];
    traineeSelect.appendChild(opt);
  });

  // Auto-fill profile fields
  traineeSelect.addEventListener("change", () => {
    const t = trainees.find(x => x["Employee Name"] === traineeSelect.value);
    if (!t) return;
    document.getElementById("empid").textContent  = t["Emp ID"]   || "—";
    document.getElementById("branch").textContent = t["Branch"]   || "—";
    document.getElementById("mentor").textContent = t["Mentor"]   || "—";
    document.getElementById("buddy").textContent  = t["Buddy"]    || "—";
  });

  function saveEval() {
    const data = {
      timestamp: new Date().toLocaleString(),
      trainee: traineeSelect.value,
      evaluator: document.getElementById("evaluator").value,
      empid: document.getElementById("empid").textContent,
      branch: document.getElementById("branch").textContent,
      mentor: document.getElementById("mentor").textContent,
      buddy: document.getElementById("buddy").textContent
    };

    document.querySelectorAll(".grid-3 input, .grid-3 textarea, .grid-3 select").forEach(el => {
      if (!el.name) return;
      if (el.type === "radio") {
        if (el.checked) data[el.name] = el.value;
      } else {
        data[el.name] = el.value;
      }
    });

    const existing = JSON.parse(localStorage.getItem("evaluations") || "[]");
    existing.push(data);
    localStorage.setItem("evaluations", JSON.stringify(existing));

    alert("Saved!");
    renderTable();
  }

  function renderTable() {
    const all = JSON.parse(localStorage.getItem("evaluations") || "[]");
    const wrap = document.getElementById("resultTable");
    if (!all.length) { wrap.innerHTML = ""; return; }
    const keys = Object.keys(all[0]);

    let html = "<table><thead><tr>";
    keys.forEach(k => html += "<th>" + k + "</th>");
    html += "</tr></thead><tbody>";

    all.forEach(r => {
      html += "<tr>";
      keys.forEach(k => html += "<td>" + (r[k] || "") + "</td>");
      html += "</tr>";
    });

    html += "</tbody></table>";
    wrap.innerHTML = html;
  }

  function downloadAll() {
    const all = JSON.parse(localStorage.getItem("evaluations") || "[]");
    if (!all.length) { alert("No records saved."); return; }
    const keys = Object.keys(all[0]);

    const csv = [keys.join(",")]
      .concat(all.map(r =>
        keys.map(k => '"' + String(r[k] || "").replace(/"/g, '""') + '"').join(",")
      ))
      .join("\n");

    const blob = new Blob([csv], { type:"text/csv" });
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "sales_trainee_evaluations.csv";
    a.click();
  }

  renderTable();
</script>

</body>
</html>
